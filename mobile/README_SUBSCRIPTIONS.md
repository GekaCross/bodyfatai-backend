# Система подписок для BodyFatAI

## Что было добавлено

1. **RevenueCat SDK** - для управления подписками
2. **Экран подписки** - красивый UI для покупки подписок
3. **Проверка подписки** - автоматическая проверка статуса при запуске
4. **Защита функций** - расчет доступен только для Premium пользователей

## Быстрый старт

### 1. Установите зависимости

```bash
cd mobile
npm install
```

### 2. Настройте RevenueCat

1. Создайте аккаунт на https://app.revenuecat.com
2. Создайте проект
3. Получите API ключи (iOS и Android)
4. Откройте `src/services/subscription.ts` и замените:
   ```typescript
   const REVENUECAT_API_KEY_IOS = 'YOUR_IOS_API_KEY';
   ```
   на ваш реальный ключ

### 3. Настройте App Store Connect

1. Создайте подписки в App Store Connect:
   - `monthly_premium` (месячная)
   - `yearly_premium` (годовая)

2. Создайте entitlement в RevenueCat:
   - Название: `premium`

3. Создайте Offering в RevenueCat:
   - Название: `default`
   - Добавьте пакеты для monthly и yearly

### 4. Тестирование

```bash
npm start
```

Используйте тестовый аккаунт Sandbox для покупок.

## Структура файлов

- `src/services/subscription.ts` - сервис для работы с подписками
- `src/screens/SubscriptionScreen.tsx` - экран покупки подписки
- `src/screens/MainScreen.tsx` - основной экран с проверкой подписки
- `App.tsx` - инициализация RevenueCat при запуске

## Как это работает

1. При запуске приложения инициализируется RevenueCat
2. Проверяется статус подписки пользователя
3. Если пользователь пытается использовать функцию без подписки - показывается экран подписки
4. После покупки статус обновляется автоматически

## Дополнительная информация

Подробная инструкция по настройке находится в файле `SUBSCRIPTION_SETUP.md`

